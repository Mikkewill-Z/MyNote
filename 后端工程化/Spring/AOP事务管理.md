# 转账功能实现
三层架构+(xml+注解方式实现数据库操作)
## 问题
![[Pasted image 20231129091345.png|400]]
## 优化->事务
将sql与业务逻辑绑定在一起去执行
### 事务的特性
原子性^[不可分割]
隔离性^[事务与事务之间互相独立]
一致性^[一个事务中的数据状态前后一致]
持久性^[事务提交后会永久保存到数据库]
### 事务处理
数据库: start transaction,,commit,rollback
java: 默认情况下jdbc会自动提交事务
connection.setAutoCommit(false)^[关闭自动提交]
connection.commit();^[事务提交]
connection.rollback();^[事务回滚]
### 实现方式
编程式事务^[通过那些java代码操作事务]
声明式事务^[通过具体事务管理器进行事务操作]
	使用的持久层框架不同,具体事务管理器对象也不同
	但有一个共同特点

# 实现
1. 添加事务的依赖包spring-tx
2. 在配置类中创建事务管理器对象
3. 启用事务注解,注意命名空间的导入
4. 在业务逻辑层添加事务注解
![[Pasted image 20231129101308.png|400]]
## 纯注解实现事务管理

将xml文件实现的功能全部使用注解来进行实现
xml文件做了什么?
	使用bean注册对应对象进入容器之中
		使用bean注册德鲁伊数据源
		并使用property将相应元素进行配置
	componentscan进行扫描使相应注解生效
	启用事务注解
	创建事务管理器对象
	![[Pasted image 20231130181852.png|400]]
	至于配置类,使用一个单独的appconfig来进行整合,最终测试的时候只需要调用这一个就可以了
	![[Pasted image 20231130182342.png|400]]
	
