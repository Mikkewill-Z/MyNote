## 概述
MVCC又称多版本并发控制,是通过数据行的多个版本管理来实现数据库的并发控制,*读-写并发则可以通过MVCC的机制来解决*
**MVCC的核心**
	提高数据库并发性能
	不加锁的情况下,解决读写冲突问题^[本质是乐观锁思想]
	MVCC是用**undo log**来保证的
## 概念
### 快照读
读取的是快照数据,因为其是基于多版本的,因此快照读的可能并非是当前版本,可能是之前的历史版本^[不加锁的简单的select都属于快照读]
### 当前读
加锁的select语句,执行当前读
当前读读到的数据一定是数据的最新版本
**加锁**的select,或者对数据进行增删改都会进行当前读
## 流程
ReadView读视图-->用来记录事务的版本的
未提交时读取可能出现的问题
![[Pasted image 20240130092732.png|470]]
解决读写冲突的问题,事务没有提交之前读取到的数据也是历史版本的数据
![[Pasted image 20240130092609.png|470]]
## MVCC-ReadView

机制一: 通过undo log 版本链和ReadView机制,可以保证一个事务不会用到并发执行的另一个事务的更新
机制二: 通过undo log 版本链和ReadView机制,可以保证一个事务只可以读到该事务自己修改的数据^[不同事务读取不到,自己的事务都可以读取到]

